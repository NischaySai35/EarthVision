<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EarthVision - Interactive Earth Explorer</title>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
  <div id="borderTop">
    <div class="logo-container">
      <button id="hamburgerBtn" class="hamburger control-btn" aria-label="Toggle side pane" aria-controls="sidePane" aria-expanded="false" title="Open menu">
        <i class="fas fa-bars" aria-hidden="true"></i>
        <span class="btn-label">Menu</span>
      </button>
      <h1 class="logo-text">EarthVision</h1>
      <h1 class="logo-text" style="font-size:1.3em; font-weight:400;"> : Explore, Analyze &amp; Compare Global Maps Instantly</h1>
    </div>
    <!-- header actions (right side) -->
    <div class="header-actions" style="position:absolute; right:12px; top:10px;">
      <button id="compareToggleHeader" class="header-btn control-btn compare-big" title="Compare Mode" aria-label="Toggle Compare View">
        <i class="fas fa-th"></i><span class="btn-label">Compare</span>
      </button>
    </div>
  </div>
  
  <div id="appContainer">
    <header class="site-header"></header>

    <aside id="sidePane" class="side-pane" aria-hidden="true">
      <div class="pane-header">
        <h2>Controls</h2>
        <button id="closePane" class="close-btn" aria-label="Close side panel"><i class="fas fa-times"></i></button>
      </div>
      <div class="pane-controls">
        <div class="control-section">
          <h3>Date Selection</h3>
          <div class="input-container">
            <label for="paneDateInput">Date:</label>
            <input type="date" id="paneDateInput" class="control-input" />
            <button id="applyDateBtn" class="control-btn">Apply</button>
          </div>
        </div>
        
        <div class="control-section">
          <h3>Location Search</h3>
          <div class="input-container">
            <label for="paneLocationInput">Location:</label>
            <input type="text" id="paneLocationInput" class="control-input" placeholder="City, Country or Lat, Lon" />
            <button id="applyLocationBtn" class="control-btn">Search</button>
          </div>
        </div>
        
        <!-- Prominent Compare button sits at top and is centered; other controls centered below -->
        <div class="control-bar vertical" role="toolbar" aria-label="Map controls">
          <button id="compareToggle" class="control-btn compare-big" title="Compare Mode"><i class="fas fa-th"></i><span class="btn-label">Compare</span></button>
          <div class="control-row centered">
            <button id="zoomIn" class="control-btn" title="Zoom In"><i class="fas fa-plus"></i><span class="btn-label">Zoom In</span></button>
            <button id="zoomOut" class="control-btn" title="Zoom Out"><i class="fas fa-minus"></i><span class="btn-label">Zoom Out</span></button>
          </div>
          <div class="control-row centered">
            <button id="panToggle" class="control-btn active" title="Toggle Pan"><i class="fas fa-hand-paper"></i><span class="btn-label">Pan</span></button>
            <button id="resetView" class="control-btn" title="Reset View"><i class="fas fa-home"></i><span class="btn-label">Reset</span></button>
          </div>
          <div class="control-row centered">
            <button id="fitWorld" class="control-btn" title="Fit World"><i class="fas fa-globe-americas"></i><span class="btn-label">Fit World</span></button>
            <button id="navToggle" class="control-btn" title="Toggle Navigation"><i class="fas fa-location-arrow"></i><span class="btn-label">Nav</span></button>
          </div>
        </div>
       </div>
     </aside>

    <div id="map"></div>

    <!-- Compare grid (hidden until Compare is clicked) -->
    <div id="compareGrid" class="compare-grid" style="display:none;">
      <div class="compare-header">
        <h2>Compare View</h2>
        <button id="closeCompare" class="close-compare-btn"><i class="fas fa-times"></i></button>
      </div>
      <div class="compare-cells">
        <div class="compare-cell" id="cell-0">
          <div class="cell-label">NASA Blue Marble</div>
        </div>
        <div class="compare-cell" id="cell-1">
          <div class="cell-label">VIIRS CityLight</div>
        </div>
        <div class="compare-cell" id="cell-2">
          <div class="cell-label">VIIRS RGB Layer</div>
        </div>
        <div class="compare-cell" id="cell-3">
          <div class="cell-label">Blue Marble</div>
        </div>
      </div>
    </div>
    
    <!-- Loading indicator -->
    <div id="loadingOverlay" class="loading-overlay">
      <div class="loading-spinner"></div>
      <div class="loading-text">Loading Earth data...</div>
    </div>
  </div>
  
  <!-- Notification container will be created dynamically -->

  <!-- Leaflet JS (load first) -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  ></script>
  <!-- App script (depends on Leaflet) -->
  <script src="{{ url_for('static', filename='app.js') }}"></script>

</body>
</html>
